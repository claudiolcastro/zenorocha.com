<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Senhoras e senhores, apresento-lhes Wormz // Zeno Rocha</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/highlight.css">
  <link rel="stylesheet" href="/css/senna.css">

  <script src="/js/senna.min.js"></script>
  <script src="/js/headroom.min.js"></script>
  <script src="/js/main.js"></script>

  <!-- Inspectlet -->
  <script>
    window.__insp = window.__insp || [];
    __insp.push(['wid', 772378335]);
    (function() {
      function __ldinsp(){var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); }
      if (window.attachEvent){
        window.attachEvent('onload', __ldinsp);
      }else{
        window.addEventListener('load', __ldinsp, false);
      }
    })();
  </script>

  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-4114546-2', 'auto');
    ga('send', 'pageview');
  </script>
</head>
<body data-senna data-senna-surface>
  <div class="senna-loading-bar"></div>

  <header class="site-header ">
    <a href="/" class="logo">zeno</a>
  
    <nav class="site-nav">
      <ul>
        <li><a href="/articles/">Articles</a></li>
        <li><a href="/talks/">Talks</a></li>
        <li><a href="/projects/">Projects</a></li>
        <li><a href="/reminder/">Reminder</a></li>
      </ul>
    </nav>
  
    <div class="nav-social">
      <a href="https://github.com/zenorocha" title="GitHub">
        <svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"></path></svg>
      </a>
    </div>
  </header>
  <main class="post">
    <header class="post-header">
      <h1 class="post-title">Senhoras e senhores, apresento-lhes Wormz</h1>
      <div class="post-image" style="background-image: url(http://media.tumblr.com/tumblr_lr5yzobIBN1qe3219.jpg)"></div>
      <h2 class="post-subtitle">Sep 30, 2011</h2>
    </header>
    <div class="post-content post-article">
      <div class="post-container">

        <!-- <p class="demo-download"><a href="http://html5-pro.com/wormz/" target="_blank"><img src="http://media.tumblr.com/tumblr_lk325lvHwF1qe3219.png" class="botao"/></a> <a href="https://github.com/HTML5-Pro/wormz/" target="_blank"><img src="http://media.tumblr.com/tumblr_lk325u7HMG1qe3219.png" class="botao"/></a></p> -->
<p>Ontem foi o lançamento oficial do projeto <a href="http://html5-pro.com/wormz/">Wormz</a>, um experimento em canvas que eu e Zanoni Miranda estivemos trabalhando nos últimos dias.</p>
<p>É com muita felicidade que entramos para lista dos primeiros brasileiros a figurar no <a href="http://www.chromeexperiments.com/detail/wormz/">Chrome Experiments</a>, a galeria da <a href="http://www.chromeexperiments.com/about/">Google</a> com os melhores experimentos feitos em HTML5 de todo o mundo.</p>
<p>Muitas foram as lições aprendidas durante esse processo e pretendo apresentar aqui alguns detalhes técnicos por trás desse projeto e as motivações em cada tomada de decisão.</p>
<!-- more -->
<p>Abaixo, você pode ver uma pequena demonstração em vídeo do que é possível fazer com ele.</p>
<div class="iframe-wrap">
  <iframe src="http://www.youtube.com/embed/acc10Cb5V0o" frameborder="0" allowfullscreen="true">
  </iframe>
</div>

<h2 id="jquery">jQuery</h2>
<blockquote>
<p>Se jQuery torna tudo tão fácil, por que vocês codificaram tudo em Javascript puro?</p>
</blockquote>
<p>Essa resposta é simples, <strong>desempenho</strong>. Para um algoritmo dessa complexidade o requisito desempenho é simplesmente crucial. Ter escrito toda sua lógica em jQuery poderia ter levado menos tempo, porém no final seu uso significa mais processamento e, portanto, mais demora.</p>
<p>Falando em desempenho, o <a href="http://tiagoveloso.com/">Tiago Veloso</a> fez uns testes bem legais utilizando as versões atualizadas dos canais beta de cada navegador - ou seja, Google Chrome 15.0.874.54 beta-m e Firefox 8.0.</p>
<p>E, por incrível que pareça, o Firefox se saiu bem melhor. Com ele a CPU ficou em 12-13% rodando bem fluido, enquanto que no Chrome ia lá pra 17% com 5 FPS ou menos. </p>
<p>Mais detalhes <a href="http://www.facebook.com/zenorocha/posts/100363310073976">nesse post</a> e nos screenshots abaixo:</p>
<p>Chrome: <a href="http://bit.ly/ocqYbp"></a><a href="http://bit.ly/ocqYbp">http://bit.ly/ocqYbp</a> - <a href="http://bit.ly/nlI9fp"></a><a href="http://bit.ly/nlI9fp">http://bit.ly/nlI9fp</a>
Firefox: <a href="http://bit.ly/pELXgT"></a><a href="http://bit.ly/pELXgT">http://bit.ly/pELXgT</a> - <a href="http://bit.ly/p85qkH"></a><a href="http://bit.ly/p85qkH">http://bit.ly/p85qkH</a></p>
<h2 id="html5">HTML5</h2>
<blockquote>
<p>Que funcionalidades do HTML5 vocês exploram nesse projeto?</p>
</blockquote>
<p>Já que estávamos fazendo algo em HTML5, resolvemos ir além do canvas e utilizar algumas coisas que seriam úteis para aprimorar a experiência do usuário.</p>
<p>No canto esquerdo, criamos um slider para que o usuário possa interagir com o experimento mudando de cor, aumentando a velocidade e etc. Para essa interface utilizamos um dos <a href="http://diveintohtml5.org/forms.html#type-range">novos tipos de input chamado range</a>.</p>
<p><img src="http://media.tumblr.com/tumblr_lr63c9bWtR1qe3219.jpg" alt="">Sua aparência nativa nos atendia muito bem em navegadores <a href="http://pt.wikipedia.org/wiki/WebKit">webkit</a>, mas no Firefox era muito inferior. O que acabou nos motivando a utilizar um plugin chamado <a href="http://flowplayer.org/tools/rangeinput/">jQuery Tools Range Input</a>. Após algumas mudanças visuais e refatorações no core do plugin conseguimos chegar nesse visual.</p>
<p><img src="http://media.tumblr.com/tumblr_lr64hhhvvx1qe3219.jpg" alt="">No canto direito, criamos uma lista das imagens que, de tempos em tempos, se revezam no ambiente em que a mágica acontece.</p>
<p>A ideia aqui foi aumentar ainda mais a interatividade do usuário com o experimento, possibilitando que ele adicione suas próprias imagens. Isso tudo na forma mais intuitiva possível, arrastando do seu desktop para o navegador.</p>
<p>Para reproduzir esse tipo de interação nativamente utilizamos a <a href="http://dev.w3.org/2006/webapi/FileAPI/">File API</a> e a <a href="http://html5doctor.com/native-drag-and-drop/">Drag and Drop API</a>.</p>
<p>A flexibilidade de criar novos atributos no estilo <strong>data-*</strong> também se destacam não só nesse projeto, mas em muitos que estou desenvolvendo hoje. Talvez esteja na hora de falar sobre ele aqui no blog inclusive.</p>
<h2 id="compatibilidade">Compatibilidade</h2>
<blockquote>
<p>O Internet Explorer 8 é o navegador mais usado em todo o planeta segundo o <a href="http://www.w3counter.com/globalstats.php">W3Counter</a> e o fato é que a tag <canvas> não é suportada nele. Ainda bem que existe o <a href="http://code.google.com/p/explorercanvas/">ExplorerCanvas</a> que resolve esse problema.</p>
<p>Então, por que vocês não utilizaram esse recurso?</p>
</blockquote>
<p>Fiz alguns testes de desempenho com isso e os resultados foram satisfatórios.</p>
<p>Mas dessa vez, não tem nada a ver com desempenho.</p>
<p>Eu, como desenvolvedor web, me sinto com a missão constante de evangelizar o uso de browsers modernos para as pessoas, até porque os dois lados ganham com isso.</p>
<p>Pela característica experimental desse projeto, optamos por apresentar uma mensagem que incentivasse esse usuário que não possui um navegador com suporte nativo para esse novo elemento do HTML5, a utilizar um browser mais moderno.</p>
<p><img src="http://media.tumblr.com/tumblr_lr5zzzK4Lt1qe3219.jpg" alt=""></p>
<h2 id="detec-o">Detecção</h2>
<blockquote>
<p>E como é feita a detecção desse usuário que não possui suporte?</p>
</blockquote>
<p>Usando o famoso <a href="http://www.modernizr.com/">Modernizr</a>, é claro. Só que dessa vez com muito mais objetividade. Seu novo <a href="http://www.modernizr.com/download/">build customizável</a> abriu portas para um uso muito mais eficaz e nosso case explicita bem isso.</p>
<p>Perceba que se você baixar toda a biblioteca, terá que importar um arquivo com tamanho de 42kb. E para prover outro tipo de conteúdo poderia usar o <a href="http://yepnopejs.com/">Yepnope.js</a> que já está incorporado na biblioteca. Assim eu codificaria algo do tipo:</p>
<pre><code class="hljs"><span class="hljs-tag">yepnope</span>({
  <span class="hljs-attribute">test</span>: Modernizr.canvas,
  <span class="hljs-attribute">yep</span>: <span class="hljs-string">'js/wormz.js'</span>,
  <span class="hljs-attribute">nope</span>: <span class="hljs-string">'js/polyfill.js'</span>
});</code></pre>

<p>O que seria muito aceitável, mas por quê não ir direto ao ponto?</p>
<p>Ok, eu poderia esquecer a biblioteca e ter escrito eu mesmo esse teste de funcionalidade, mas não queria perder tempo com isso, foi aí que o build customizável entra. Já que meu projeto só aborda o uso da tag <code>&lt;canvas&gt;</code> posso configurar a biblioteca para que apenas as linhas desse tipo de detecção específico estejam lá.</p>
<p>E além do mais, não preciso do yepnope pra isso. Você pode habilitar a criação de classes css no seu html, assim fica fácil pra tratar isso no CSS.</p>
<pre><code class="hljs"><span class="hljs-class">.no-canvas</span> <span class="hljs-id">#canvas</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(../img/polyfill.jpg) no-repeat <span class="hljs-number">10px</span> <span class="hljs-number">10px</span></span></span>;
}</span></code></pre>

<p>No fritar dos ovos, ao invés de importar 42kb de código, só importo 2.7kb agora.</p>
<h2 id="html5-pro">HTML5-Pro</h2>
<blockquote>
<p>E o que vocês vão fazer em seguida?</p>
</blockquote>
<strike>A mesma coisa que fazemos todos os dias, tentar dominar o mundo :P</strike>

<p>A ideia é fazer do <a href="http://html5-pro.com%5D">HTML5-Pro</a> um time que, atráves de projetos criativos, procura explorar o máximo que esse novo padrão pode oferecer.</p>
<p>Já estamos com outras ideias em desenvolvimento e se você curte spoilers é só chegar no <a href="https://github.com/HTML5-Pro/">nosso Github</a>.</p>
<h2 id="feedback">Feedback</h2>
<p>O volume de visitas têm sido assustador nesses últimos dias e o feedback igualmente bom.</p>
<p><img src="http://media.tumblr.com/tumblr_lsd5qzTbat1qe3219.jpg" alt=""></p>
<p><a href="http://hakim.se/">Hakim Hattab</a>, um dos desenvolvedores responsáveis pelo famoso projeto <a href="http://hakim.se/">20 Things I Learned About Browsers and the Web</a> também comentou.</p>
<p><img src="http://media.tumblr.com/tumblr_lsd5qnmQXf1qe3219.jpg" alt=""></p>
<p>Além desses meio enigmáticos…</p>
<p><img src="http://media.tumblr.com/tumblr_lsd5qbi0611qe3219.jpg" alt=""></p>
<p>E você, gostou do experimento? Tem outras perguntas sobre ele?</p>
<p>Fique a vontade para interagir aqui.</p>

      </div>
    </div>
  </main>



</body>
</html>